<!DOCTYPE html>
<html lang="de">

    <%- include("./partials/head.ejs") %>

<body style="background-color: #fff;">

    <form id="form" class="formElement">
        <ul>
            <li><input placeholder="Kategorie: " type="text" name="category" required calss="create_input" class="create_input_category"></li>
            <li><input placeholder="Name: " type="text" name="name" required calss="create_input" class="create_input_name"></li>
            <li><input placeholder="Kaufdatum: " type="date" id="buy" name="buy" required calss="create_input"></li>
            <li><input placeholder="Garantie bis: " type="date" id="warrenty" name="warrenty" requierd calss="create_input"></li>
            <li><input placeholder="Information: " type="text" id="info" name="info" calss="create_input" class="create_input_information"></li>
            <a class="btnCreate"><img alt="edit" src="/img/icons/bearbeiten.png"></a>
        </ul>
    </form>

</body>

<script>
    const sender = document.querySelector('a.btnCreate');
    sender.addEventListener('click', (e) => {
        const endpoint = '/hardware';
        console.log(document.getElementsByClassName("formElement"));
        const data = new URLSearchParams(new FormData(document.getElementById("form")));
        fetch(endpoint, {
            method: 'POST',
            body: data
        })
            .then(response => response.json())
            .then(data => top.location.href = data.redirect)
            .catch(err => console.log(err));
    })
</script>

</html>